(function(f){var f=f||window,i={addEvent:function(a,b,d){a.addEventListener?a.addEventListener(b,d,!1):a.attachEvent&&a.attachEvent("on"+b,function(e){e=e||window.event;d();})}},e={node:{},images:[],scroll:{type:[],on:!1,timer:null,event:!1},addImage:function(a,b,d){var c=a.getAttribute("data-type");this.images.push({id:d,node:a,url:b,type:c||!1,image:null,isLoad:!1,isShow:!1,callback:null,offset:a.offsetTop})},showImage:function(a){a=this.images[a];a.node.src=a.image.src;a.isLoad=!0;a.isShow=!0},load:function(a){this.loadAndShow(a,
!1)},addCallback:function(a,b){this.showImage(b);a.callback=!0;i.addEvent(a.image,"load",void 0)},loadAndShow:function(a,b,d){for(var a=a||!1,d=d||!1,c=null,g=0,e=this.images.length;g<e;g++)c=this.images[g],c.type==a&&!(d&&c.offset>this.getRealScroll())&&(c.image?b&&(c.isLoad?c.isShow||(c.node.src=c.image.src,c.isShow=!0):c.callback||this.addCallback(c,g)):(c.image=new Image,c.image.src=c.url,c.isShow=!0,b&&this.addCallback(c,g)))},show:function(a){this.loadAndShow(a,!0)},update:function(){for(var a=
[],b=0,d=document.images.length;b<d;b++){var c=document.images[b],e=c.getAttribute("data-url"),f=c.getAttribute("data-lazyId");if(!f&&e&&""!=e){var h=Math.ceil(1E4*Math.random());c.setAttribute("lazyId",h);this.addImage(c,e,h)}if(f||h)a.push(f||h)}this.removeUnrealObj(a)},removeUnrealObj:function(a){for(var b=[],d=0,c=this.images.length;d<c;d++){var e=this.images[d];this.isRealObject(e,a)&&b.push(e)}this.images=b},isRealObject:function(a,b){for(var d=0,c=b.length;d<c;d++)if(a.id==b[d])return!0;return!1},
getIndexInArray:function(a,b){for(var d=0,c=a.length;d<c;d++)if(a[d]==b)return d;return!1},onScroll:function(a){var a=a||!1,b=this,d=b.scroll.type,c=b.getIndexInArray(d,a||!1);!c&&0!==c&&d.push(a);b.inspectScroll();b.scroll.event||(b.scroll.event=!0,i.addEvent(document,"scroll",function(){b.inspectScroll()}))},offScroll:function(a){var b=this.scroll.type;((a=this.getIndexInArray(b,a||!1||!1))||0===a)&&b.splice(a,1)},getRealScroll:function(){return(window.pageYOffset?window.pageYOffset:document.documentElement.scrollTop?
document.documentElement.scrollTop:document.body.scrollTop)+1.5*document.documentElement.clientHeight},inspectScroll:function(){var a=this,b=a.scroll.type;clearInterval(a.scroll.timer);a.scroll.timer=setTimeout(function(){for(var d=0,c=b.length;d<c;d++)a.loadAndShow(b[d],!0,!0)},100)}};f.lazyLoadingImages={update:function(){e.update.call(e);return f.lazyLoadingImages},show:function(a){e.show.call(e,a);return f.lazyLoadingImages},load:function(a){e.load.call(e,a);return f.lazyLoadingImages},onScroll:function(a){e.onScroll.call(e,
a);return f.lazyLoadingImages},offScroll:function(a){e.offScroll.call(e,a);return f.lazyLoadingImages}};i.addEvent(document,"DOMContentLoaded",function(){f.lazyLoadingImages.update()},!1)})(this);
